---
import Layout from '../../layouts/Layout.astro'
import { projects, getProjectBySlug } from '../../data/projects'
import type { GetStaticPaths } from 'astro'

export const getStaticPaths: GetStaticPaths = async () => {
  return projects.map((project) => ({
    params: { slug: project.slug },
    props: { project },
  }))
}

const { project } = Astro.props
---

<Layout title={`${project.title} — Sondernista`}>
  <div class="pt-24">
    <section class="py-16 md:py-24">
      <div class="max-w-[1200px] mx-auto px-6">
        <!-- Header -->
        <div class="mb-16">
          <a 
            href="/work" 
            class="text-xs uppercase tracking-widest text-secondary hover:text-primary transition-colors"
          >
            ← Back to Work
          </a>
          <h1 class="mt-8 text-2xl uppercase tracking-widest font-bold text-primary">
            {project.title}
          </h1>
          <p class="mt-2 text-xs uppercase tracking-widest text-secondary">
            {project.year}
          </p>
          <p class="mt-8 max-w-2xl text-sm text-muted-foreground leading-relaxed">
            {project.longDescription}
          </p>
        </div>

        <!-- Gallery -->
        <div class="flex flex-col gap-8">
          {project.gallery.map((image: string, index: number) => (
            <div class="border border-border">
              <img 
                src={image} 
                alt={`${project.title} - Image ${index + 1}`}
                class="w-full"
                loading={index === 0 ? 'eager' : 'lazy'}
              />
            </div>
          ))}
        </div>

        <!-- Navigation -->
        <div class="mt-24 pt-8 border-t border-border flex justify-between">
          <a 
            href="/work" 
            class="text-xs uppercase tracking-widest text-secondary hover:text-primary transition-colors"
          >
            ← All Projects
          </a>
        </div>
      </div>
    </section>
  </div>
</Layout>
